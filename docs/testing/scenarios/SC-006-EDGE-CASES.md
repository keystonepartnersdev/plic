# SC-006: 엣지 케이스 시나리오

> 에러 처리, 권한, 한도 등 예외 상황 테스트

---

## 기본 정보

| 항목 | 값 |
|------|-----|
| 시나리오 ID | SC-006 |
| 기능 | 예외 상황 및 엣지 케이스 처리 |
| 우선순위 | Medium |
| 예상 TC 수 | 10 |
| 상태 | ✅ 완료 (2026-02-04) |

---

## 사전 조건

- [ ] 다양한 상태의 테스트 계정 준비
- [ ] 테스트용 거래 데이터 준비

---

## 테스트 케이스

### TC-006-01: 비로그인 접근 제어

| 항목 | 내용 |
|------|------|
| 목적 | 비로그인 시 보호된 페이지 접근 차단 |
| 사전조건 | 로그아웃 상태 |
| 기대결과 | 로그인 페이지로 리다이렉트 |

**테스트 단계:**

| # | 접근 URL | 기대 동작 | 실제 결과 | Pass/Fail |
|---|----------|----------|----------|-----------|
| 1 | `/deals` | `/auth/login` 리다이렉트 | | ⬜ |
| 2 | `/deals/new` | `/auth/login` 리다이렉트 | | ⬜ |
| 3 | `/mypage` | `/auth/login` 리다이렉트 | | ⬜ |
| 4 | `/payment/123` | `/auth/login` 리다이렉트 | | ⬜ |
| 5 | `/admin` | `/admin/login` 리다이렉트 | | ⬜ |

---

### TC-006-02: 정지 회원 접근 제한

| 항목 | 내용 |
|------|------|
| 목적 | 정지된 회원의 기능 제한 확인 |
| 사전조건 | 정지 상태 회원으로 로그인 |
| 기대결과 | 제한된 기능에서 경고 표시 |

**테스트 단계:**

| # | 동작 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|----------|----------|-----------|
| 1 | 로그인 시도 | 로그인 성공 + 정지 안내 팝업 | | ⬜ |
| 2 | 홈페이지 접속 | 정상 표시 | | ⬜ |
| 3 | 송금 신청 시도 | "계정이 정지되었습니다" 메시지 | | ⬜ |
| 4 | 마이페이지 접속 | 정상 표시 | | ⬜ |
| 5 | 거래내역 조회 | 과거 거래 조회 가능 | | ⬜ |

---

### TC-006-03: 대기 회원 제한 기능

| 항목 | 내용 |
|------|------|
| 목적 | 심사 대기 중 회원의 기능 제한 |
| 사전조건 | pending_verification 상태 |
| 기대결과 | 결제 단계에서 제한 |

**테스트 단계:**

| # | 동작 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|----------|----------|-----------|
| 1 | 로그인 | 정상 로그인 | | ⬜ |
| 2 | 송금 신청 시작 | 위저드 진입 가능 | | ⬜ |
| 3 | 결제 단계 진입 | "심사 대기 중" 안내 | | ⬜ |
| 4 | 마이페이지 상태 확인 | "심사 중" 표시 | | ⬜ |

---

### TC-006-04: 거래 금액 한도 체크

| 항목 | 내용 |
|------|------|
| 목적 | 최소/최대 금액 제한 확인 |
| 사전조건 | 송금 신청 화면 |
| 기대결과 | 한도 초과 시 에러 |

**테스트 케이스:**

| # | 입력 금액 | 기대 동작 | 실제 결과 | Pass/Fail |
|---|----------|----------|----------|-----------|
| 1 | 0원 | "최소 금액 미만" 에러 | | ⬜ |
| 2 | 999원 | "최소 금액 미만" 에러 | | ⬜ |
| 3 | 1,000원 | 정상 진행 | | ⬜ |
| 4 | 10,000,000원 | "최대 금액 초과" 경고 | | ⬜ |
| 5 | 일일 누적 한도 초과 | "일일 한도 초과" 에러 | | ⬜ |

---

### TC-006-05: 세션 만료 처리

| 항목 | 내용 |
|------|------|
| 목적 | 세션/토큰 만료 시 처리 |
| 사전조건 | 로그인 상태에서 토큰 만료 |
| 기대결과 | 재로그인 유도 |

**테스트 단계:**

| # | 동작 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|----------|----------|-----------|
| 1 | API 호출 시 401 응답 | 자동 로그아웃 | | ⬜ |
| 2 | 로그인 페이지 이동 | `/auth/login` 리다이렉트 | | ⬜ |
| 3 | 세션 만료 메시지 | "세션이 만료되었습니다" | | ⬜ |
| 4 | 재로그인 후 복귀 | 이전 페이지로 이동 (가능 시) | | ⬜ |

---

### TC-006-06: 네트워크 에러 처리

| 항목 | 내용 |
|------|------|
| 목적 | API 호출 실패 시 에러 처리 |
| 사전조건 | 네트워크 불안정 시뮬레이션 |
| 기대결과 | 적절한 에러 메시지 및 재시도 옵션 |

**테스트 단계:**

| # | 상황 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|----------|----------|-----------|
| 1 | API 타임아웃 | "요청 시간 초과" 메시지 | | ⬜ |
| 2 | 500 서버 에러 | "서버 오류" 메시지 | | ⬜ |
| 3 | 네트워크 끊김 | "네트워크 연결 확인" 메시지 | | ⬜ |
| 4 | 재시도 버튼 | 재시도 기능 동작 | | ⬜ |

---

### TC-006-07: 동시 접속/중복 제출 방지

| 항목 | 내용 |
|------|------|
| 목적 | 중복 요청 방지 확인 |
| 사전조건 | 폼 제출 상황 |
| 기대결과 | 중복 제출 차단 |

**테스트 단계:**

| # | 동작 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|----------|----------|-----------|
| 1 | 송금 신청 버튼 더블클릭 | 1건만 생성됨 | | ⬜ |
| 2 | 결제 버튼 더블클릭 | 1건만 결제됨 | | ⬜ |
| 3 | 처리 중 버튼 상태 | disabled + 로딩 표시 | | ⬜ |
| 4 | 여러 탭에서 동시 결제 | 1건만 성공 | | ⬜ |

---

### TC-006-08: 브라우저 뒤로가기 처리

| 항목 | 내용 |
|------|------|
| 목적 | 뒤로가기 시 예상치 못한 동작 방지 |
| 사전조건 | 위저드 또는 결제 진행 중 |
| 기대결과 | 적절한 경고 또는 상태 복원 |

**테스트 단계:**

| # | 상황 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|----------|----------|-----------|
| 1 | 위저드 3단계에서 뒤로가기 | 2단계로 이동 (데이터 유지) | | ⬜ |
| 2 | 결제 진행 중 뒤로가기 | 경고 모달 또는 차단 | | ⬜ |
| 3 | 결제 완료 후 뒤로가기 | 결과 페이지 유지 또는 홈 이동 | | ⬜ |
| 4 | 로그인 후 뒤로가기 | 로그인 페이지 재접근 방지 | | ⬜ |

---

### TC-006-09: 파일 업로드 예외

| 항목 | 내용 |
|------|------|
| 목적 | 파일 업로드 예외 상황 처리 |
| 사전조건 | 서류 업로드 단계 |
| 기대결과 | 적절한 에러 메시지 |

**테스트 케이스:**

| # | 파일 조건 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|----------|----------|----------|-----------|
| 1 | 15MB (초과) | "파일 크기 초과" 에러 | | ⬜ |
| 2 | .exe 파일 | "지원하지 않는 형식" 에러 | | ⬜ |
| 3 | 손상된 이미지 | 업로드 실패 메시지 | | ⬜ |
| 4 | 0KB 빈 파일 | "빈 파일" 에러 | | ⬜ |
| 5 | 업로드 중 취소 | 정상 취소 처리 | | ⬜ |

---

### TC-006-10: 타인 거래/정보 접근 차단

| 항목 | 내용 |
|------|------|
| 목적 | 타인의 거래/정보에 직접 URL 접근 차단 |
| 사전조건 | A 사용자로 로그인 |
| 기대결과 | 권한 없음 에러 |

**테스트 단계:**

| # | 접근 시도 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|----------|----------|----------|-----------|
| 1 | 타인 거래 상세 `/deals/{other-did}` | "권한 없음" 또는 404 | | ⬜ |
| 2 | 타인 결제 `/payment/{other-did}` | "권한 없음" 또는 404 | | ⬜ |
| 3 | 일반 유저의 어드민 접근 `/admin` | 로그인 페이지 리다이렉트 | | ⬜ |

---

## 테스트 결과 요약

| TC ID | TC명 | 결과 | 버그 ID |
|-------|------|------|---------|
| TC-006-01 | 비로그인 접근 제어 | ⬜ | |
| TC-006-02 | 정지 회원 접근 제한 | ⬜ | |
| TC-006-03 | 대기 회원 제한 기능 | ⬜ | |
| TC-006-04 | 거래 금액 한도 체크 | ⬜ | |
| TC-006-05 | 세션 만료 처리 | ⬜ | |
| TC-006-06 | 네트워크 에러 처리 | ⬜ | |
| TC-006-07 | 중복 제출 방지 | ⬜ | |
| TC-006-08 | 브라우저 뒤로가기 | ⬜ | |
| TC-006-09 | 파일 업로드 예외 | ⬜ | |
| TC-006-10 | 타인 정보 접근 차단 | ⬜ | |

**총계**: 0/10 Pass

---

## 관련 파일

- `src/lib/auth.ts` (인증/권한)
- `src/stores/useUserStore.ts` (사용자 상태)
- `src/lib/api.ts` (API 에러 처리)

---

## 변경 이력

| 날짜 | 변경 내용 | 작성자 |
|------|----------|--------|
| 2026-02-04 | 최초 작성 | Claude |

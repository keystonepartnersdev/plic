# SC-004: 어드민 거래 관리 시나리오

> 어드민 페이지에서 거래 조회 및 관리 테스트

---

## 기본 정보

| 항목 | 값 |
|------|-----|
| 시나리오 ID | SC-004 |
| 기능 | 어드민 거래 목록, 상세, 상태 변경 |
| 우선순위 | High |
| 예상 TC 수 | 6 |
| 상태 | ✅ 완료 (2026-02-04) |

---

## 사전 조건

- [ ] 어드민 계정 로그인
- [ ] 테스트용 거래 데이터 존재
- [ ] 접속 URL: `/admin`

---

## 테스트 케이스

### TC-004-01: 어드민 로그인

| 항목 | 내용 |
|------|------|
| 목적 | 어드민 페이지 로그인 |
| 사전조건 | 어드민 계정 존재 |
| 기대결과 | 대시보드 접근 성공 |

**테스트 단계:**

| # | 동작 | 입력값 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|--------|----------|----------|-----------|
| 1 | `/admin/login` 접속 | - | 로그인 페이지 표시 | | ⬜ |
| 2 | 이메일 입력 | admin@plic.kr | 입력됨 | | ⬜ |
| 3 | 비밀번호 입력 | admin1234! | 입력됨 | | ⬜ |
| 4 | "로그인" 클릭 | - | 대시보드 이동 | | ⬜ |

---

### TC-004-02: 거래 목록 조회

| 항목 | 내용 |
|------|------|
| 목적 | 전체 거래 목록 조회 및 필터링 |
| 사전조건 | 어드민 로그인 완료 |
| 기대결과 | 거래 목록 표시, 필터 동작 |

**테스트 단계:**

| # | 동작 | 입력값 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|--------|----------|----------|-----------|
| 1 | "거래관리" 메뉴 클릭 | - | `/admin/deals` 이동 | | ⬜ |
| 2 | 거래 목록 표시 | - | 테이블 형태로 표시 | | ⬜ |
| 3 | 상태 필터 적용 | "결제대기" | 해당 상태만 표시 | | ⬜ |
| 4 | 날짜 필터 적용 | 오늘 | 오늘 거래만 표시 | | ⬜ |
| 5 | 검색 | 거래ID 입력 | 해당 거래 표시 | | ⬜ |
| 6 | 페이지네이션 | 2페이지 클릭 | 다음 페이지 표시 | | ⬜ |

**검증 포인트:**
- 거래 ID, 사용자명, 금액, 상태, 생성일 표시
- 필터 복합 적용 가능
- 총 건수 표시

---

### TC-004-03: 거래 상세 조회

| 항목 | 내용 |
|------|------|
| 목적 | 개별 거래 상세 정보 확인 |
| 사전조건 | 거래 목록 접근 |
| 기대결과 | 거래 상세 정보 표시 |

**테스트 단계:**

| # | 동작 | 입력값 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|--------|----------|----------|-----------|
| 1 | 거래 행 클릭 | - | 상세 페이지 이동 | | ⬜ |
| 2 | 기본 정보 확인 | - | 거래유형, 금액, 수수료 표시 | | ⬜ |
| 3 | 사용자 정보 확인 | - | 신청자명, 이메일 표시 | | ⬜ |
| 4 | 수취인 정보 확인 | - | 수취인명, 계좌 표시 | | ⬜ |
| 5 | 상태 이력 확인 | - | 상태 변경 히스토리 | | ⬜ |
| 6 | 첨부 서류 확인 | - | 업로드된 파일 목록 | | ⬜ |

---

### TC-004-04: 거래 상태 변경

| 항목 | 내용 |
|------|------|
| 목적 | 어드민에서 거래 상태 수동 변경 |
| 사전조건 | 거래 상세 접근 |
| 기대결과 | 상태 변경 성공 |

**테스트 단계:**

| # | 동작 | 입력값 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|--------|----------|----------|-----------|
| 1 | "상태 변경" 버튼 클릭 | - | 상태 선택 모달/드롭다운 | | ⬜ |
| 2 | 새 상태 선택 | "송금완료" | 선택됨 | | ⬜ |
| 3 | 변경 사유 입력 | "수동 송금 처리" | 입력됨 | | ⬜ |
| 4 | "변경" 확인 | - | 성공 메시지 | | ⬜ |
| 5 | 상태 업데이트 확인 | - | 상태가 변경됨 | | ⬜ |
| 6 | 이력 추가 확인 | - | 변경 이력에 기록됨 | | ⬜ |

**검증 포인트:**
- 상태 전이 규칙 준수 (불가능한 전이 차단)
- 변경 사유 필수 입력
- 변경 시간 및 관리자 정보 기록

---

### TC-004-05: 거래 메모 추가

| 항목 | 내용 |
|------|------|
| 목적 | 거래에 관리자 메모 추가 |
| 사전조건 | 거래 상세 접근 |
| 기대결과 | 메모 저장 성공 |

**테스트 단계:**

| # | 동작 | 입력값 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|--------|----------|----------|-----------|
| 1 | 메모 영역 확인 | - | 메모 입력 필드 | | ⬜ |
| 2 | 메모 입력 | "고객 문의로 확인 필요" | 입력됨 | | ⬜ |
| 3 | "저장" 클릭 | - | 성공 메시지 | | ⬜ |
| 4 | 메모 표시 확인 | - | 저장된 메모 표시 | | ⬜ |

---

### TC-004-06: 거래 내보내기 (Export)

| 항목 | 내용 |
|------|------|
| 목적 | 거래 데이터 엑셀 다운로드 |
| 사전조건 | 거래 목록 접근 |
| 기대결과 | 엑셀 파일 다운로드 |

**테스트 단계:**

| # | 동작 | 입력값 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|--------|----------|----------|-----------|
| 1 | "엑셀 다운로드" 버튼 확인 | - | 버튼 표시 | | ⬜ |
| 2 | 필터 적용 | 이번 달 | 필터됨 | | ⬜ |
| 3 | 다운로드 클릭 | - | 파일 다운로드 시작 | | ⬜ |
| 4 | 파일 내용 확인 | - | 필터된 데이터만 포함 | | ⬜ |

---

## 테스트 결과 요약

| TC ID | TC명 | 결과 | 버그 ID |
|-------|------|------|---------|
| TC-004-01 | 어드민 로그인 | ⬜ | |
| TC-004-02 | 거래 목록 조회 | ⬜ | |
| TC-004-03 | 거래 상세 조회 | ⬜ | |
| TC-004-04 | 거래 상태 변경 | ⬜ | |
| TC-004-05 | 거래 메모 추가 | ⬜ | |
| TC-004-06 | 거래 내보내기 | ⬜ | |

**총계**: 0/6 Pass

---

## 관련 파일

- `src/app/admin/deals/page.tsx`
- `src/app/admin/deals/[did]/page.tsx`
- `src/stores/useDealStore.ts`

---

## 변경 이력

| 날짜 | 변경 내용 | 작성자 |
|------|----------|--------|
| 2026-02-04 | 최초 작성 | Claude |

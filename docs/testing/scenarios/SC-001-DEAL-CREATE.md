# SC-001: 거래 생성 시나리오

> 송금 신청(거래 생성) 전체 플로우 테스트

---

## 기본 정보

| 항목 | 값 |
|------|-----|
| 시나리오 ID | SC-001 |
| 기능 | 거래 생성 (5단계 위저드) |
| 우선순위 | Critical |
| 예상 TC 수 | 10 |
| 상태 | ✅ 완료 (2026-02-04) |

---

## 사전 조건

- [ ] 테스트 사용자 계정 생성 완료
- [ ] 사용자 상태: `active`
- [ ] 로그인 상태

---

## 테스트 케이스

### TC-001-01: 거래유형 선택

| 항목 | 내용 |
|------|------|
| 목적 | 거래유형 4가지 중 하나 선택 가능 |
| 사전조건 | 로그인 후 `/deals/new` 접속 |
| 기대결과 | 거래유형 선택 후 다음 단계로 이동 |

**테스트 단계:**

| # | 동작 | 입력값 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|--------|----------|----------|-----------|
| 1 | `/deals/new` 접속 | - | 거래유형 선택 화면 표시 | | ⬜ |
| 2 | "물품매입" 선택 | 클릭 | 선택됨 표시 | | ⬜ |
| 3 | "다음" 버튼 클릭 | - | 금액 입력 단계로 이동 | | ⬜ |

**검증 포인트:**
- 4가지 거래유형 표시: 물품매입, 서비스대금, 외주비용, 기타지불
- 선택하지 않으면 다음 버튼 비활성화

---

### TC-001-02: 금액 입력

| 항목 | 내용 |
|------|------|
| 목적 | 송금 금액 입력 및 수수료 계산 확인 |
| 사전조건 | 거래유형 선택 완료 |
| 기대결과 | 금액 입력 시 수수료 자동 계산 |

**테스트 단계:**

| # | 동작 | 입력값 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|--------|----------|----------|-----------|
| 1 | 금액 입력 | 100000 | 100,000원 표시 | | ⬜ |
| 2 | 수수료 확인 | - | 4,000원 (4%) 표시 | | ⬜ |
| 3 | 총 결제금액 확인 | - | 104,000원 표시 | | ⬜ |
| 4 | "다음" 클릭 | - | 수취인 정보 단계 이동 | | ⬜ |

**검증 포인트:**
- 숫자만 입력 가능
- 3자리마다 콤마 자동 포맷팅
- 최소/최대 금액 제한 체크

**엣지 케이스:**

| 입력값 | 기대 동작 | 실제 결과 | Pass/Fail |
|--------|----------|----------|-----------|
| 0 | 경고 표시 | | ⬜ |
| -100 | 입력 불가 | | ⬜ |
| 10000000 (천만원 이상) | 한도 초과 경고 | | ⬜ |

---

### TC-001-03: 수취인 정보 입력

| 항목 | 내용 |
|------|------|
| 목적 | 수취인(받는 사람) 정보 입력 |
| 사전조건 | 금액 입력 완료 |
| 기대결과 | 수취인 정보 저장 |

**테스트 단계:**

| # | 동작 | 입력값 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|--------|----------|----------|-----------|
| 1 | 수취인명 입력 | 홍길동 | 입력됨 | | ⬜ |
| 2 | 은행 선택 | 국민은행 | 선택됨 | | ⬜ |
| 3 | 계좌번호 입력 | 123456789012 | 입력됨 | | ⬜ |
| 4 | "다음" 클릭 | - | 서류 업로드 단계 이동 | | ⬜ |

**검증 포인트:**
- 필수 필드 누락 시 에러 메시지
- 계좌번호 형식 검증

---

### TC-001-04: 서류 업로드

| 항목 | 내용 |
|------|------|
| 목적 | 거래유형별 필수 서류 업로드 |
| 사전조건 | 수취인 정보 입력 완료 |
| 기대결과 | 서류 업로드 성공 |

**테스트 단계:**

| # | 동작 | 입력값 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|--------|----------|----------|-----------|
| 1 | 서류 업로드 영역 표시 확인 | - | 업로드 영역 표시 | | ⬜ |
| 2 | 파일 선택 | test.pdf (1MB) | 업로드 진행 | | ⬜ |
| 3 | 업로드 완료 확인 | - | 파일명 표시, 삭제 가능 | | ⬜ |
| 4 | "다음" 클릭 | - | 확인 단계 이동 | | ⬜ |

**검증 포인트:**
- 파일 형식: jpg, jpeg, png, pdf
- 최대 파일 크기: 10MB
- 거래유형별 필수 서류 체크

**엣지 케이스:**

| 입력값 | 기대 동작 | 실제 결과 | Pass/Fail |
|--------|----------|----------|-----------|
| 15MB 파일 | 용량 초과 에러 | | ⬜ |
| .exe 파일 | 형식 불가 에러 | | ⬜ |
| 서류 미첨부 | 경고 메시지 (선택적) | | ⬜ |

---

### TC-001-05: 최종 확인 및 신청

| 항목 | 내용 |
|------|------|
| 목적 | 입력 정보 확인 후 거래 생성 |
| 사전조건 | 모든 단계 입력 완료 |
| 기대결과 | 거래 생성 성공, 거래 상세 페이지 이동 |

**테스트 단계:**

| # | 동작 | 입력값 | 기대 결과 | 실제 결과 | Pass/Fail |
|---|------|--------|----------|----------|-----------|
| 1 | 요약 정보 표시 확인 | - | 거래유형, 금액, 수취인 표시 | | ⬜ |
| 2 | "송금 신청하기" 클릭 | - | 로딩 표시 | | ⬜ |
| 3 | 신청 완료 | - | 거래 상세 페이지 이동 | | ⬜ |
| 4 | 거래 상태 확인 | - | `awaiting_payment` 상태 | | ⬜ |

**검증 포인트:**
- 거래 ID(DID) 생성 확인
- 거래 상태: 결제대기
- 거래내역 목록에 표시

---

## 테스트 결과 요약

| TC ID | TC명 | 결과 | 버그 ID |
|-------|------|------|---------|
| TC-001-01 | 거래유형 선택 | ⬜ | |
| TC-001-02 | 금액 입력 | ⬜ | |
| TC-001-03 | 수취인 정보 입력 | ⬜ | |
| TC-001-04 | 서류 업로드 | ⬜ | |
| TC-001-05 | 최종 확인 및 신청 | ⬜ | |

**총계**: 0/5 Pass

---

## 관련 파일

- `src/app/(customer)/deals/new/page.tsx`
- `src/stores/useDealDraftStore.ts`
- `src/lib/api.ts` (거래 생성 API)

---

## 변경 이력

| 날짜 | 변경 내용 | 작성자 |
|------|----------|--------|
| 2026-02-04 | 최초 작성 | Claude |

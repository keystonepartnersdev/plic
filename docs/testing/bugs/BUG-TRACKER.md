# PLIC 버그 트래커

> 발견된 버그를 추적하고 해결 상태를 관리합니다.
> 최종 업데이트: 2026-02-04

---

## 요약

| 심각도 | Open | In Progress | Resolved | 총 |
|--------|------|-------------|----------|---|
| Critical | 0 | 0 | 3 | 3 |
| High | 0 | 0 | 4 | 4 |
| Medium | 0 | 0 | 3 | 3 |
| Low | 0 | 0 | 2 | 2 |
| **총합** | **0** | **0** | **12** | **12** |

---

## Critical Bugs

### BUG-001: 어드민 비밀번호 하드코딩

| 항목 | 내용 |
|------|------|
| **상태** | ✅ Resolved |
| **발견일** | 2026-02-02 |
| **해결일** | 2026-02-02 |
| **위치** | `src/stores/useAdminStore.ts:37-38, 51` |
| **설명** | 어드민 비밀번호가 소스코드에 평문으로 하드코딩되어 있음 |
| **영향** | 보안 취약점 - 소스코드 접근자가 어드민 비밀번호 확인 가능 |
| **해결 방법** | `sampleAdmins` 배열 제거, `IAdmin` 타입에서 password 필드 제거, 서버 사이드 인증으로 전환 |

---

### BUG-002: 클라이언트 사이드 인증

| 항목 | 내용 |
|------|------|
| **상태** | ✅ Resolved |
| **발견일** | 2026-02-02 |
| **해결일** | 2026-02-02 |
| **위치** | `src/stores/useAdminStore.ts:98-107` |
| **설명** | `loginWithCredentials` 메서드가 클라이언트에서 비밀번호 비교 |
| **영향** | 보안 취약점 - 브라우저 콘솔에서 인증 우회 가능 |
| **해결 방법** | `loginWithCredentials` 메서드 제거, `setAdminFromResponse` 메서드로 대체하여 서버 응답만 처리 |

---

### BUG-003: JWT 토큰 localStorage 저장

| 항목 | 내용 |
|------|------|
| **상태** | ✅ Resolved |
| **발견일** | 2026-02-02 |
| **해결일** | 2026-02-02 |
| **위치** | `src/lib/api.ts:169-192` |
| **설명** | 액세스/리프레시 토큰이 localStorage에 저장됨 |
| **영향** | XSS 공격 시 토큰 탈취 가능 |
| **해결 방법** | Next.js API Routes를 프록시로 사용하여 httpOnly 쿠키로 토큰 저장. `src/app/api/auth/` 경로에 login, logout, refresh, me 엔드포인트 생성. `src/lib/auth.ts`에 secureAuth 유틸리티 추가. |

---

## High Bugs

### BUG-004: TypeScript strict 모드 비활성화

| 항목 | 내용 |
|------|------|
| **상태** | ✅ Resolved |
| **발견일** | 2026-02-02 |
| **해결일** | 2026-02-04 |
| **위치** | `tsconfig.json` |
| **설명** | `strict: false` 설정으로 타입 안전성 저하 |
| **영향** | 런타임 타입 에러 발생 가능 |
| **해결 방법** | `strict: true` 활성화 완료 |

---

### BUG-005: API URL 하드코딩

| 항목 | 내용 |
|------|------|
| **상태** | ✅ Resolved |
| **발견일** | 2026-02-02 |
| **해결일** | 2026-02-02 |
| **위치** | `src/lib/api.ts:3`, `src/stores/useDealDraftStore.ts:7` |
| **설명** | API URL이 소스코드에 하드코딩되어 있고 중복됨 |
| **영향** | 환경별 배포 어려움, 설정 변경 시 코드 수정 필요 |
| **해결 방법** | `src/lib/config.ts` 생성하여 환경 설정 중앙화, 환경변수 `NEXT_PUBLIC_API_BASE_URL` 사용 |

---

## Medium Bugs

### BUG-006: 대형 컴포넌트 (deals/[did]/page.tsx)

| 항목 | 내용 |
|------|------|
| **상태** | ✅ Resolved |
| **발견일** | 2026-02-02 |
| **해결일** | 2026-02-04 |
| **위치** | `src/app/(customer)/deals/[did]/page.tsx` |
| **설명** | 1,502줄의 대형 컴포넌트 |
| **영향** | 유지보수 어려움, 코드 분할 어려움 |
| **해결 방법** | 16개 하위 컴포넌트로 분할 완료 (AmountCard, RecipientCard, AttachmentsCard 등) |

---

### BUG-007: 대형 컴포넌트 (deals/new/page.tsx)

| 항목 | 내용 |
|------|------|
| **상태** | ✅ Resolved |
| **발견일** | 2026-02-02 |
| **해결일** | 2026-02-04 |
| **위치** | `src/app/(customer)/deals/new/page.tsx` |
| **설명** | 1,414줄의 대형 컴포넌트 |
| **영향** | 유지보수 어려움 |
| **해결 방법** | 하위 컴포넌트로 분할 완료 (TypeStep, AmountStep, RecipientStep, DocsStep, ConfirmStep 등) |

---

### BUG-008: any 타입 과다 사용

| 항목 | 내용 |
|------|------|
| **상태** | ✅ Resolved |
| **발견일** | 2026-02-02 |
| **해결일** | 2026-02-04 |
| **위치** | 전체 코드베이스 |
| **설명** | 161개의 any 타입 사용 |
| **영향** | 타입 안전성 저하 |
| **해결 방법** | 161개 → 3개로 98% 감소 (남은 3개는 Zustand migrate 함수, 의도적 유지) |

---

## Low Bugs

### BUG-009: useEffect 의존성 누락

| 항목 | 내용 |
|------|------|
| **상태** | ✅ Resolved |
| **발견일** | 2026-02-02 |
| **해결일** | 2026-02-04 |
| **위치** | 여러 페이지 |
| **설명** | useEffect 의존성 배열에 필요한 값 누락 |
| **영향** | 스테일 클로저 버그 가능성 |
| **해결 방법** | 11개 경고 → 0개로 모두 해결 |

---

### BUG-010: 민감 정보 로깅

| 항목 | 내용 |
|------|------|
| **상태** | ✅ Resolved |
| **발견일** | 2026-02-02 |
| **해결일** | 2026-02-04 |
| **위치** | `src/app/api/popbill/account/verify/route.ts:49,57` |
| **설명** | 계좌번호가 console.log에 출력됨 |
| **영향** | 로그에서 민감 정보 노출 |
| **해결 방법** | 민감 정보 로깅 제거, apiLogger 정리 완료 |

---

## E2E 테스트에서 발견된 버그 (2026-02-04)

### BUG-011: /mypage/grade 인증 체크 누락

| 항목 | 내용 |
|------|------|
| **상태** | ✅ Resolved |
| **발견일** | 2026-02-04 |
| **해결일** | 2026-02-04 |
| **위치** | `src/app/(customer)/mypage/grade/page.tsx` |
| **설명** | 비로그인 사용자가 등급 페이지에 직접 접근 가능 |
| **영향** | 인증되지 않은 사용자가 보호된 페이지에 접근 가능 |
| **해결 방법** | useEffect로 인증 체크 추가, isLoggedIn false일 때 /auth/login으로 리다이렉트 |

---

### BUG-012: /payment/result 인증 체크 누락

| 항목 | 내용 |
|------|------|
| **상태** | ✅ Resolved |
| **발견일** | 2026-02-04 |
| **해결일** | 2026-02-04 |
| **위치** | `src/app/(customer)/payment/result/page.tsx` |
| **설명** | 비로그인 사용자가 결제 결과 페이지에 직접 접근 가능 |
| **영향** | 인증되지 않은 사용자가 보호된 페이지에 접근 가능 |
| **해결 방법** | useEffect로 인증 체크 추가, isLoggedIn false일 때 /auth/login으로 리다이렉트 |

---

## 버그 등록 템플릿

```markdown
### BUG-XXX: 버그 제목

| 항목 | 내용 |
|------|------|
| **상태** | 🔴 Open / 🟠 In Progress / 🟢 Resolved |
| **발견일** | YYYY-MM-DD |
| **위치** | 파일 경로:라인 |
| **설명** | 무엇이 잘못되었는가 |
| **재현 방법** | 어떻게 재현하는가 |
| **영향** | 어떤 영향이 있는가 |
| **해결 계획** | 어떻게 해결할 것인가 |
| **해결일** | YYYY-MM-DD (해결 시) |
```

---

**마지막 업데이트**: 2026-02-04 (E2E 테스트 버그 2건 수정)
